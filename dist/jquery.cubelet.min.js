/*! jquery-cubelet - v0.3.0 - 2020-12-28 - https://github.com/jeremyckahn/cubelet */
define(["jquery"],function(a){function b(a,b,c){var d=a._cubeletCoordinates;a.cubeletSetCoords({x:d.x-c,y:d.y+b})}function c(a,b,c){var d=b+c,e=a._cubeletCoordinates.scale>0?1:-1,f=a.cubeletGetCoords().z+e*d;a.cubeletSetCoords({z:f})}function d(a){var b,c,d,e;if("touchmove"===a.type){var f=a.touches[0];d=f.pageX,e=f.pageY,b=f.clientX,c=f.clientY}else d=a.pageX,e=a.pageY,b=a.clientX,c=a.clientY;return{clientX:b,clientY:c,pageX:d,pageY:e}}function e(e,f,g){"touchmove"===g.type&&g.preventDefault();var h=d(g),i=h.clientX,j=h.clientY,k=h.clientX-e._lastClientX||0,l=h.clientY-e._lastClientY||0;e._lastClientX=i,e._lastClientY=j,a.contains(e._$cubeletCube[0],f)||e._$cubeletContainer[0]===f?b(e,k,l):a.contains(e._$cubeletZRotationArm[0],f)&&c(e,k,l),e.trigger("change")}function f(b,c){b._lastClientX=c.clientX,b._lastClientY=c.clientY,b._isDragging=!0;var d=a.proxy(e,q,b,c.target);q.on("mousemove",d),q.one("mouseup",function(){b._isDragging=!1,q.off("mousemove",d)}),window.addEventListener("touchmove",d,{passive:!1}),q.one("touchend",function(){b._isDragging=!1,window.removeEventListener("touchmove",d)})}function g(a,b){b.preventDefault();var c=b.deltaY,d=a._cubeletCoordinates.scale,e=c/o,f=+(d+e).toFixed(4);a._cubeletCoordinates.scale=f,a._$cubeletContainer.css("transform","scale("+f+")"),a.trigger("change")}function h(b,c){if(!b._isDragging){c.stopPropagation();var d=b._proxiedOnWindowMousewheel;d&&window.removeEventListener("wheel",d);var e=a.proxy(g,b,b);b._proxiedOnWindowMousewheel=e,window.addEventListener("wheel",e,{passive:!1}),q.one("mousemove",function(){window.removeEventListener("wheel",d)})}}function i(){j=document.createElement("style"),j.innerHTML=m.replace(/__VENDOR__/g,s()),document.head.appendChild(j),k=a(l)}var j,k,l=['<div class="cubelet-container">','<div class="cubelet-cube">','<figure class="cubelet-front"></figure>','<figure class="cubelet-back"></figure>','<figure class="cubelet-right"></figure>','<figure class="cubelet-left"></figure>','<figure class="cubelet-top"></figure>','<figure class="cubelet-bottom"></figure>',"</div>",'<div class="cubelet-rotation-arm">','<div class="cubelet-rotation-handle"></div>',"</div>","</div>"].join(""),m=[".cubelet-container,",".cubelet-cube {","height: 100%;","width: 100%; }",".cubelet-cube {","__VENDOR__transform: translateZ(-100px) rotateY(0deg) rotateX(0deg); ","__VENDOR__transform-style: preserve-3d; }",".cubelet-cube figure {","margin: 0;","position: absolute;","height: 100%;","width: 100%; }",".cubelet-front {","__VENDOR__transform: rotateY(0deg) translateZ(50px); }",".cubelet-back {","__VENDOR__transform: rotateX(180deg) translateZ(50px);","background: #fb0; }",".cubelet-right {","__VENDOR__transform: rotateY(90deg) translateZ(50px);","background: #00cc4e; }",".cubelet-left {","__VENDOR__transform: rotateY(-90deg) translateZ(50px);","background: #06f; }",".cubelet-top {","__VENDOR__transform: rotateX(90deg) translateZ(50px);","background: #f77; }",".cubelet-bottom {","__VENDOR__transform: rotateX(-90deg) translateZ(50px);","background: #b00; }",".cubelet-rotation-arm {","cursor: ew-resize;","bottom: 50%;","background: #fff;","border-left: dotted #000 2px;","left: 50%;","position: absolute;","height: 125px;","width: 0; }",".cubelet-rotation-handle {","background: #444;","border: solid #000 2px;","border-radius: 50%;","height: 10px;","left: -8px;","position: absolute;","right: 8%;","width: 10px; }"].join("\n"),n=100,o=30,p=!1,q=a(window),r={x:0,y:0};q.on("mousemove",function(a){r.x=a.pageX,r.y=a.pageY}),q.on("touchmove",function(a){var b=a.originalEvent.touches[0];r.x=b.pageX,r.y=b.pageY});var s=function(){var a=document.body.style,b="";return"-webkit-transform"in a?b="-webkit-":"-moz-transform"in a?b="-moz-":"-ms-transform"in a?b="-ms-":"-o-transform"in a&&(b="-o-"),s=function(){return b},b};a.fn.cubeletInit=function(){return p||(i(),p=!0),this._cubeletCoordinates={x:0,y:0,z:0,scale:1},this._lastOffsetX=null,this._lastOffsetY=null,this._$cubeletHtmlFragment=k.clone(),this.append(this._$cubeletHtmlFragment),this._$cubeletContainer=this.find(".cubelet-container"),this._$cubeletCube=this.find(".cubelet-cube"),this._$cubeletZRotationArm=this.find(".cubelet-rotation-arm"),this._$cubeletZRotationHandle=this.find(".cubelet-rotation-handle"),this.css({height:n+"px",width:n+"px"}),this.addClass("cubelet"),this.cubeletSetCoords(this._cubeletCoordinates),this._$cubeletContainer.on("mousedown",a.proxy(f,this,this)),this._$cubeletContainer.on("mousemove",a.proxy(h,this,this)),this._$cubeletContainer.on("touchstart",a.proxy(f,this,this)),this._$cubeletContainer.on("touchmove",a.proxy(h,this,this)),this},a.fn.cubeletGetCoords=function(){return a.extend({},this._cubeletCoordinates)},a.fn.cubeletSetCoords=function(b){var c=this._cubeletCoordinates;a.extend(c,b);var d="rotateX("+c.x+"deg) rotateY("+c.y+"deg)";return this.css("transform","translate(-50%, -50%) rotate("+c.z+"deg)"),this._$cubeletCube.css("transform",d),this._$cubeletContainer.css("transform","scale("+c.scale+")"),this},a.fn.cubeletShow=function(){this._$cubeletContainer.show();var b=document.elementFromPoint(r.x,r.y);return(a.contains(this._$cubeletContainer[0],b)||this._$cubeletContainer[0]===b)&&this._$cubeletContainer.trigger("mousemove"),this},a.fn.cubeletHide=function(){return this._$cubeletContainer.hide(),this},a.fn.cubeletIsShown=function(){return this._$cubeletContainer.is(":visible")},a.fn.cubeletApplyRotationToElement=function(a){var b=this.cubeletGetCoords();a.css("transform","rotateX("+b.x+"deg) rotateY("+b.y+"deg) rotateZ("+b.z+"deg) scale("+b.scale+")")}});