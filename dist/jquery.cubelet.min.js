/*! jquery-cubelet - v0.0.0 - 2013-08-11 - https://github.com/jeremyckahn/cubelet */
(function(t){function e(t,e,n){var r=t._cubeletCoordinates;t.cubeletSetCoords({x:r.x-n,y:r.y+e})}function n(t,e,n){var r=e+n,i=t.cubeletGetCoords().z+r;t.cubeletSetCoords({z:i}),t.css("transform","translate(-50%, -50%) rotate("+i+"deg)")}function r(r,i,o){var s=o.clientX,a=o.clientY,u=o.clientX-r._lastClientX,l=o.clientY-r._lastClientY;r._lastClientX=s,r._lastClientY=a,t.contains(r._$cubeletCube[0],i)||r._$cubeletContainer[0]===i?e(r,u,l):t.contains(r._$cubeletZRotationArm[0],i)&&n(r,u,l),r.trigger("change")}function i(e,n){e._lastClientX=n.clientX,e._lastClientY=n.clientY;var i=t.proxy(r,b,e,n.target);b.on("mousemove",i),b.on("mouseup",function(){b.off("mousemove",i)})}function o(){s=document.createElement("style"),s.innerHTML=l.replace(/__VENDOR__/g,d()),document.head.appendChild(s),a=t(u)}var s,a,u=['<div class="cubelet-container">','<div class="cubelet-cube">','<figure class="cubelet-front"></figure>','<figure class="cubelet-back"></figure>','<figure class="cubelet-right"></figure>','<figure class="cubelet-left"></figure>','<figure class="cubelet-top"></figure>','<figure class="cubelet-bottom"></figure>',"</div>",'<div class="cubelet-rotation-arm">','<div class="cubelet-rotation-handle"></div>',"</div>","</div>"].join(""),l=[".cubelet { ","margin: 0 auto; }",".cubelet-container,",".cubelet-cube {","height: 100%;","width: 100%; }",".cubelet-cube {","__VENDOR__transform: translateZ(-100px) rotateY(0deg) rotateX(0deg); ","__VENDOR__transform-style: preserve-3d; }",".cubelet-cube figure {","margin: 0;","position: absolute;","height: 100%;","width: 100%; }",".cubelet-front {","__VENDOR__transform: rotateY(0deg) translateZ(50px); }",".cubelet-back {","__VENDOR__transform: rotateX(180deg) translateZ(50px);","background: #fb0; }",".cubelet-right {","__VENDOR__transform: rotateY(90deg) translateZ(50px);","background: #00cc4e; }",".cubelet-left {","__VENDOR__transform: rotateY(-90deg) translateZ(50px);","background: #06f; }",".cubelet-top {","__VENDOR__transform: rotateX(90deg) translateZ(50px);","background: #f77; }",".cubelet-bottom {","__VENDOR__transform: rotateX(-90deg) translateZ(50px);","background: #b00; }",".cubelet-rotation-arm {","cursor: ew-resize;","bottom: 50%;","background: #fff;","border-left: dotted #000 2px;","left: 50%;","position: absolute;","height: 125px;","width: 0; }",".cubelet-rotation-handle {","background: #444;","border: solid #000 2px;","border-radius: 50%;","height: 10px;","left: -8px;","position: absolute;","right: 8%;","width: 10px; }"].join("\n"),c=!1,b=t(window),d=function(){var t=document.body.style,e="";return"-webkit-transform"in t?e="-webkit-":"-moz-transform"in t?e="-moz-":"-ms-transform"in t?e="-ms-":"-o-transform"in t&&(e="-o-"),d=function(){return e},e};t.fn.cubeletInit=function(){return c||(o(),c=!0),this._cubeletCoordinates={x:0,y:0,z:0},this._lastOffsetX=null,this._lastOffsetY=null,this._$cubeletHtmlFragment=a.clone(),this.append(this._$cubeletHtmlFragment),this._$cubeletContainer=this.find(".cubelet-container"),this._$cubeletCube=this.find(".cubelet-cube"),this._$cubeletZRotationArm=this.find(".cubelet-rotation-arm"),this._$cubeletZRotationHandle=this.find(".cubelet-rotation-handle"),this.cubeletSetSize(100),this.cubeletSetCoords(this._cubeletCoordinates),this.css("transform","translate(-50%, -50%)"),this.addClass("cubelet"),this._$cubeletContainer.on("mousedown",t.proxy(i,this,this)),this},t.fn.cubeletSetSize=function(t){return this.css({height:t+"px",width:t+"px"})},t.fn.cubeletGetCoords=function(){return t.extend({},this._cubeletCoordinates)},t.fn.cubeletSetCoords=function(e){var n=this._cubeletCoordinates;t.extend(n,e);var r="rotateX("+n.x+"deg) rotateY("+n.y+"deg)";return this._$cubeletCube.css("transform",r),this},t.fn.cubeletShow=function(){return this._$cubeletContainer.show(),this},t.fn.cubeletHide=function(){return this._$cubeletContainer.hide(),this},t.fn.cubeletIsShown=function(){return this._$cubeletContainer.is(":visible")}})(this.jQuery);